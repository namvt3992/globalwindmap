/* --- CÀI ĐẶT CHUNG & PHÔNG CHỮ MỚI --- */
html, body { height: 100%; margin: 0; padding: 0; font-family: 'Poppins', sans-serif; overflow: hidden; background-color: #f4f7f6; }
body { position: relative; }
#map { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: #a2d1e8; }

/* --- CẬP NHẬT: Sắp xếp lại thanh điều khiển thành một hàng ngang --- */
.map-controls { position: absolute; top: 15px; right: 15px; display: flex; align-items: center; gap: 10px; z-index: 1000; }
.filter-container { display: flex; align-items: center; gap: 10px; pointer-events: auto; }
.filter-group { display: flex; align-items: center; gap: 8px; background-color: rgba(255, 255, 255, 0.85); padding: 8px 12px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); backdrop-filter: blur(5px); border: 1px solid rgba(255, 255, 255, 0.2); }
.filter-group label { font-weight: 500; font-size: 0.9em; color: #333; }
#status-filter-btn { background-color: #007bff; color: white; border: none; padding: 7px 15px; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 0.9em; transition: all 0.2s ease; display: flex; align-items: center; gap: 8px; }
#status-filter-btn:hover { background-color: #0056b3; transform: translateY(-1px); }

/* --- CẬP NHẬT: Tinh chỉnh giao diện cho Choices.js --- */
.choices { width: 190px; }
.choices__inner { font-size: 0.9em; border-radius: 6px !important; border: 1px solid #ddd !important; padding: 5px 10px !important; min-height: auto; background-color: white;}
.choices__list--dropdown { border-radius: 6px !important; font-size: 0.9em; }
.choices[data-type*="select-one"]::after { right: 12.5px; }

/* --- CẬP NHẬT: Style cho bộ chọn bản đồ khi nằm trong header --- */
.leaflet-control-layers { background: none !important; box-shadow: none !important; border: none !important; backdrop-filter: none !important; padding: 0; margin: 0; }
.leaflet-control-layers-toggle { width: 42px; height: 42px; background-size: 24px 24px; background-color: white !important; border-radius: 10px !important; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border: 1px solid rgba(222, 222, 222, 0.5); }
.leaflet-control-layers-expanded { padding: 8px 12px; background-color: rgba(255, 255, 255, 0.85) !important; box-shadow: 0 4px 15px rgba(0,0,0,0.1) !important; backdrop-filter: blur(5px); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 10px !important;}
.leaflet-control-layers-base label { font-weight: 500; font-size: 0.9em; color: #333; display: flex; align-items: center; }

/* --- PANEL STATUS --- */
.status-panel { position: absolute; top: 60px; right: 0; width: 280px; background-color: white; border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.15); pointer-events: auto; transition: transform 0.3s ease, opacity 0.3s ease; transform-origin: top right; }
.status-panel-hidden { transform: scale(0.95) translateY(-10px); opacity: 0; pointer-events: none; }
.status-panel-header { display: flex; justify-content: space-between; align-items: center; padding: 12px 15px; border-bottom: 1px solid #f0f0f0; }
.status-panel-header h3 { margin: 0; font-size: 1.1em; color: #1a2c42; display: flex; align-items: center; gap: 10px;}
.close-button { font-size: 1.8em; color: #aaa; cursor: pointer; transition: color 0.2s; line-height: 1;}
.close-button:hover { color: #333; }
.status-item { display: flex; align-items: center; padding: 10px; cursor: pointer; position: relative; user-select: none; border-radius: 8px; transition: background-color 0.2s; }
.status-item:hover { background-color: #f8f9fa; }
.status-item .status-dot { width: 12px; height: 12px; border-radius: 50%; margin-right: 12px; }
.status-item .status-name { flex-grow: 1; font-weight: 500; color: #333; }
.status-item input[type="checkbox"] { display: none; }
.status-item .slider { height: 22px; width: 42px; border-radius: 22px; transition: background-color 0.2s; position: relative; background-color: #ccc; }
.status-item .slider::before { position: absolute; content: ""; height: 18px; width: 18px; left: 2px; bottom: 2px; background-color: white; border-radius: 50%; transition: transform 0.2s ease; box-shadow: 0 1px 3px rgba(0,0,0,0.2); }
.status-item input:checked + .slider { background-color: var(--status-color); }
.status-item input:checked + .slider:before { transform: translateX(20px); }

/* --- NÚT ACTION & BẢNG THỐNG KÊ --- */
.map-action-button { position: absolute; right: 15px; bottom: 30px; width: 44px; height: 44px; background-color: #fff; border: none; border-radius: 50%; box-shadow: 0 4px 12px rgba(0,0,0,0.15); cursor: pointer; z-index: 1000; display: flex; justify-content: center; align-items: center; font-size: 1.2em; color: #333; transition: all 0.2s ease; }
.map-action-button:hover { background-color: #007bff; color: white; transform: scale(1.1); }
.summary-box { padding: 15px; background: rgba(255, 255, 255, 0.9); box-shadow: 0 5px 20px rgba(0,0,0,0.15); border-radius: 12px; min-width: 320px; opacity: 0; transform: translateY(10px); transition: all 0.3s ease; pointer-events: none; position: relative; }
.summary-box-visible { opacity: 1; transform: translateY(0); pointer-events: auto; }
.summary-box h3 { margin: 0 0 10px 0; text-align: center; font-size: 1.1em; font-weight: 600;}
#stats-chart-container { height: 180px; margin-bottom: 15px; }
.summary-box .close-button { position: absolute; top: 10px; right: 15px; }
.stats-table { width: 100%; border-collapse: collapse; font-size: 0.9em; margin-top: 10px; }
.stats-table td { padding: 6px 4px; border-bottom: 1px solid #eee; }
.stats-table .status-cell { display: flex; align-items: center; gap: 8px; font-weight: 500; }
.stats-table .count-cell { text-align: right; font-weight: 600; }
.stats-table .total-row td { font-weight: bold; border-top: 2px solid #ddd; }

/* --- SIDEBAR & TIÊU ĐỀ (Không thay đổi) --- */
.sidebar { position: fixed; top: 0; left: 0; height: 100%; width: 380px; max-width: 90%; background-color: #f8f9fa; box-shadow: 5px 0 25px rgba(0,0,0,0.1); padding: 25px; box-sizing: border-box; overflow-y: auto; z-index: 2000; transform: translateX(-100%); transition: transform 0.4s ease; color: #555; border-left: 3px solid #007bff; }
.sidebar.sidebar-visible { transform: translateX(0); }
.sidebar .close-button { top: 15px; right: 20px; font-size: 2.2em; cursor: pointer; color: #aaa; position: absolute; line-height: 1;}
#info-content .sidebar-header { display: flex; align-items: center; gap: 15px; margin: 30px 0 20px 0; padding-bottom: 20px; border-bottom: 1px solid #e0e0e0; }
#info-content .sidebar-header .fa-wind { font-size: 2.2em; color: #007bff; }
#info-content h2 { color: #1a2c42; margin: 0; font-size: 1.6em; font-weight: 600; }
#info-content .sidebar-stats { display: flex; justify-content: space-around; padding: 20px 0; }
#info-content .stat-item { display: flex; flex-direction: column; align-items: center; gap: 8px; text-align: center; }
#info-content .stat-item i { font-size: 1.6em; color: #007bff; }
#info-content .stat-item span { font-size: 0.85em; color: #6c757d; font-weight: 500; }
#info-content .stat-item strong { font-size: 1.1em; color: #343a40; font-weight: 600; }
#info-details-container { margin-top: 20px; border-top: 1px solid #e0e0e0; }
.detail-item { display: flex; justify-content: space-between; align-items: center; padding: 14px 5px; border-bottom: 1px solid #e9e9e9; font-size: 0.95em; }
.detail-item-label { font-weight: 600; color: #343a40; margin-right: 15px; }
.detail-item-value { color: #555; text-align: right; font-weight: 400; }
.map-title { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); z-index: 999; pointer-events: none; }
.map-title h1 { margin: 0; font-size: 1em; color: #444; text-shadow: 1px 1px 4px rgba(255, 255, 255, 0.9); font-weight: 600;}